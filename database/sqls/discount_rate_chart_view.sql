
--
-- Structure for view `discount_rate_chart`
--

CREATE OR REPLACE ALGORITHM=UNDEFINED DEFINER=`witsyncf_flexsin`@`localhost` SQL SECURITY DEFINER VIEW `discount_rate_chart`  AS  select if(isnull(`lease_history`.`modify_id`),'Initial',`modify_lease_application`.`valuation`) AS `valuation`,if(isnull(`lease_history`.`modify_id`),`lease_assets`.`lease_start_date`,`modify_lease_application`.`effective_from`) AS `effective_date`,json_unquote(json_extract(`lease_history`.`json_data_steps`,'$.discount_rate.daily_discount_rate')) AS `daily_discount_rate`,json_unquote(json_extract(`lease_history`.`json_data_steps`,'$.discount_rate.interest_rate')) AS `interest_rate`,json_unquote(json_extract(`lease_history`.`json_data_steps`,'$.discount_rate.discount_rate_to_use')) AS `discount_rate_to_use`,`lease_assets`.`lease_start_date` AS `lease_start_date`,`lease_assets`.`lease_end_date` AS `lease_end_date`,`lease_history`.`lease_id` AS `lease_id`,`lease_history`.`id` AS `history_id` from ((`lease_history` left join `modify_lease_application` on((`lease_history`.`modify_id` = `modify_lease_application`.`id`))) join `lease_assets` on((`lease_assets`.`lease_id` = `lease_history`.`lease_id`))) ;